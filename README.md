# Облачное хранилище на Java

Курсовой проект по курсу облачное хранилище на Java

---

## Демо видео

[![Watch the video](https://i.ibb.co/4tDYf6x/video.png)](https://youtu.be/6SRCXxoei7U)

## Интерфейс
Сперва нужно залогиниться введя имя пользователя. Можно использовать только латинские буквы и цифры. 
После захода пользователь попадает в свою папку на клиенте и сервере, которая называется также как и имя пользователя.

![img](https://i.ibb.co/v4PbNRM/interface.png)
Слева - файлы клиента. Папки отображаются в [скобках]

Справа - файлы клиента на сервере. У каждого клиента они свои.

Слева внизу - лог событий

Справа внизу - общедоступные файлы. Они доступны любому клиенту, их можно только скачать.

У каждого клиента своя папка как на сервере, так и на клиенте. При щелчке на любом файле из списка он либо скачивается (если это файл на сервере),
либо загружается (если это файл на клиенте). При щелчке на папку папка открывается.

Файл качается  по частям с помощью **FileChannel** в методе **NioFileSystem.transfer()**
1 часть - 1 байт, который отправляется с помощью **FileMessage**. Информация о процессе скачивания выводится в лог. 
По завершению оправляется стандартный ответ **NFSResponse**.

Можно также создать папку и удалить или переименовать папку или файл как на клиенте, так и на сервере с помощью соответствующих кнопок над списками.
Можно также переместить файл в папку, нажав Переименовать и вбив **имя_папки/** перед файлом.


## Техническое описание
Программа состоит из 3х модулей:

**cloud-server** - сервер.
- **NettyServer** - сервер, реализованный на Netty. Запускается 1 раз 
- **FileRequestHandler** - обработчик запросов на сервер. Принимает **FileMessage** или **CommandMessage** и отправляет **NFSResponse** или **FileMessage**

**cloud-client** - клиент. 
- **FileSystemApplication** - клиентское приложение. Может запускаться несколько раз для разных клиентов 
- **LoginController** - небольшое окно логина
- **FileSystemController** - основной контроллер клиентского приложения, который отправляет и принимает запросы на\с сервера. 
  Отправляет **FileMessage** или **CommandMessage** и принимает **NFSResponse** или **FileMessage**

**core** - базовый функционал, используемый как сервером, так и клиентом
- **NioFileSystem** - файловая система, реализованная на Nio. Эмулирует UNIX команды такие как ls, rm и т.д. Используется и клиентом, и сервером.
- **Message** - базовый класс сообщения. Содержит юзернейм, который служит также идентификатором связи клиента-сервера.
- **NFSResponse** - NioFileServerResponse - ответ на запрос серверу. Содержит сообщение и список файлов, т.к. большинство команд обновляют список файлов
- **CommandMessage** - запрос на сервер в виде Unix команды. Например, **ls** или **rm filename.txt**
- **FileMessage** - кусочек файла, оправленный с сервера или на сервер. Файл качается по частям, 1 часть - 1 байт. Информация о процессе скачивания выводится в лог.
